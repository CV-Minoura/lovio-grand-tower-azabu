---
---

<section id="hero" data-section="P1-S1" class="relative h-screen w-full overflow-hidden perspective-container">
  <!-- Cinematic Image Background -->
  <div class="hero-bg-container absolute inset-0">
    <!-- 3D Parallax Layer - Back -->
    <div class="parallax-layer parallax-back absolute inset-0">
      <div class="hero-bg absolute inset-0">
        <img
          src="/images/hero.webp"
          srcset="/images/hero-480.webp 480w, /images/hero-768.webp 768w, /images/hero-1200.webp 1200w, /images/hero.webp 1920w"
          sizes="100vw"
          alt="LIVIO GRAND TOWER AZABU"
          class="w-full h-full object-cover"
          width="1920"
          height="1080"
          fetchpriority="high"
        />
      </div>
    </div>

    <!-- Tilt Shift Blur Overlay -->
    <div class="tilt-shift-overlay absolute inset-0 pointer-events-none"></div>

    <!-- Film Grain -->
    <div class="hero-grain absolute inset-0 pointer-events-none"></div>

    <!-- Anamorphic Flares (Horizontal Cinema Style) -->
    <div class="anamorphic-flares absolute inset-0 pointer-events-none">
      <div class="anamorphic-flare anamorphic-1"></div>
      <div class="anamorphic-flare anamorphic-2"></div>
      <div class="anamorphic-flare anamorphic-3"></div>
    </div>

    <!-- Light Leaks (Film Burn) -->
    <div class="light-leaks absolute inset-0 pointer-events-none">
      <div class="light-leak leak-1"></div>
      <div class="light-leak leak-2"></div>
      <div class="light-leak leak-3"></div>
    </div>

    <!-- Window Glow Pulse (Building Lights) -->
    <div class="window-glows absolute inset-0 pointer-events-none">
      <div class="window-glow glow-1"></div>
      <div class="window-glow glow-2"></div>
      <div class="window-glow glow-3"></div>
      <div class="window-glow glow-4"></div>
      <div class="window-glow glow-5"></div>
    </div>

    <!-- Fireflies / Embers -->
    <div class="fireflies absolute inset-0 pointer-events-none">
      <div class="firefly firefly-1"></div>
      <div class="firefly firefly-2"></div>
      <div class="firefly firefly-3"></div>
      <div class="firefly firefly-4"></div>
      <div class="firefly firefly-5"></div>
      <div class="firefly firefly-6"></div>
      <div class="firefly firefly-7"></div>
      <div class="firefly firefly-8"></div>
    </div>

    <!-- Original Effects -->
    <div class="hero-rays absolute inset-0 pointer-events-none">
      <div class="ray ray-1"></div>
      <div class="ray ray-2"></div>
    </div>

    <div class="hero-bokeh absolute inset-0 pointer-events-none">
      <div class="bokeh bokeh-1"></div>
      <div class="bokeh bokeh-2"></div>
      <div class="bokeh bokeh-3"></div>
      <div class="bokeh bokeh-4"></div>
    </div>

    <div class="hero-mist absolute inset-0 pointer-events-none"></div>
    <div class="hero-light-sweep absolute inset-0 pointer-events-none"></div>
    <div class="hero-color-grade absolute inset-0 pointer-events-none"></div>
    <div class="hero-vignette absolute inset-0 pointer-events-none"></div>
    <div class="hero-gradient-animated absolute inset-0"></div>
    <div class="absolute inset-0 bg-gradient-to-t from-background via-background/30 to-transparent"></div>
    <div class="hero-reflection absolute bottom-0 left-0 right-0 h-32 pointer-events-none"></div>

    <!-- Zoom Blur Overlay -->
    <div class="zoom-blur-overlay absolute inset-0 pointer-events-none opacity-0"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 h-full flex flex-col items-center justify-center px-6 text-center">
    <!-- Main Copy Container -->
    <div class="hero-content relative">
      <!-- Text Glow Background -->
      <div class="text-glow-bg absolute inset-0 -inset-x-20 -inset-y-10 pointer-events-none"></div>

      <!-- Floating Text Particles -->
      <div class="text-particles absolute inset-0 -inset-x-32 -inset-y-20 pointer-events-none">
        <div class="text-particle tp-1"></div>
        <div class="text-particle tp-2"></div>
        <div class="text-particle tp-3"></div>
        <div class="text-particle tp-4"></div>
        <div class="text-particle tp-5"></div>
        <div class="text-particle tp-6"></div>
      </div>

      <!-- Top Decoration -->
      <div class="hero-text-decor-top flex justify-center items-center mb-8 opacity-0">
        <div class="decor-line-left"></div>
        <div class="decor-diamond"></div>
        <div class="decor-line-right"></div>
      </div>

      <!-- Scramble Text Subtitle - visible immediately for LCP -->
      <p class="hero-sub font-serif text-sm md:text-base tracking-[0.4em] text-accent-gold mb-8">
        <span class="hero-sub-text scramble-text" data-text="LIVIO GRAND TOWER AZABU">LIVIO GRAND TOWER AZABU</span>
      </p>

      <!-- Premium Main Copy - Character by Character -->
      <h1 class="hero-main relative">
        <!-- Line 1: 都心の頂へ、 -->
        <span class="hero-line block overflow-hidden mb-2 md:mb-4">
          <span class="hero-line-inner flex justify-center items-center">
            <span class="hero-char-wrap"><span class="hero-char" data-char="都">都</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="心">心</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="の">の</span></span>
            <span class="hero-char-wrap"><span class="hero-char hero-char-accent" data-char="頂">頂</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="へ">へ</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="、">、</span></span>
          </span>
        </span>
        <!-- Line 2: 住まう。 -->
        <span class="hero-line block overflow-hidden">
          <span class="hero-line-inner flex justify-center items-center">
            <span class="hero-char-wrap"><span class="hero-char hero-char-accent" data-char="住">住</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="ま">ま</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="う">う</span></span>
            <span class="hero-char-wrap"><span class="hero-char" data-char="。">。</span></span>
          </span>
        </span>
      </h1>

      <!-- Bottom Decoration -->
      <div class="hero-text-decor-bottom flex justify-center items-center mt-8 opacity-0">
        <div class="decor-line-left"></div>
        <div class="decor-diamond"></div>
        <div class="decor-line-right"></div>
      </div>
    </div>

    <!-- CTA Buttons with Split Reveal -->
    <div class="hero-cta flex flex-col sm:flex-row gap-4 mt-12 opacity-0">
      <a href="#contact" class="btn btn-outline btn-reveal group">
        <span class="btn-shine"></span>
        <span class="btn-text">資料を請求する</span>
      </a>
      <a href="#contact" class="btn btn-primary btn-reveal group">
        <span class="btn-shine"></span>
        <span class="btn-text">来場予約する</span>
      </a>
    </div>
  </div>

  <!-- Scroll Indicator -->
  <div class="scroll-hint absolute bottom-8 left-1/2 -translate-x-1/2 z-10 flex flex-col items-center gap-2 opacity-0">
    <span class="text-xs tracking-widest text-text-secondary">SCROLL</span>
    <div class="scroll-indicator w-[1px] h-12 bg-border relative overflow-hidden">
      <div class="scroll-line absolute top-0 left-0 w-full h-1/2 bg-accent-gold animate-scroll"></div>
    </div>
  </div>

  <!-- Corner Accents -->
  <div class="hero-corner hero-corner-tl absolute top-8 left-8 w-16 h-16 opacity-0"></div>
  <div class="hero-corner hero-corner-br absolute bottom-8 right-8 w-16 h-16 opacity-0"></div>

  <!-- Cinematic Bars (Optional letterbox) -->
  <div class="cinematic-bar cinematic-bar-top absolute top-0 left-0 right-0 h-0 bg-black z-20"></div>
  <div class="cinematic-bar cinematic-bar-bottom absolute bottom-0 left-0 right-0 h-0 bg-black z-20"></div>
</section>

<script>
  import { gsap } from 'gsap';

  const initHero = () => {
    const heroSub = document.querySelector('.hero-sub');
    const heroSubText = document.querySelector('.hero-sub-text') as HTMLElement;
    const heroChars = document.querySelectorAll('.hero-char');
    const heroCta = document.querySelector('.hero-cta');
    const heroContainer = document.querySelector('.hero-bg-container');
    const scrollHint = document.querySelector('.scroll-hint');
    const corners = document.querySelectorAll('.hero-corner');
    const parallaxBack = document.querySelector('.parallax-back');
    const zoomBlur = document.querySelector('.zoom-blur-overlay');
    const cinematicBars = document.querySelectorAll('.cinematic-bar');
    const textDecorTop = document.querySelector('.hero-text-decor-top');
    const textDecorBottom = document.querySelector('.hero-text-decor-bottom');
    const textParticles = document.querySelectorAll('.text-particle');
    const textGlowBg = document.querySelector('.text-glow-bg');

    // Scramble characters for subtitle
    const scrambleCharsEN = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

    // Text Scramble Effect for subtitle
    const scrambleText = (element: HTMLElement, finalText: string, duration: number = 1500) => {
      const chars = scrambleCharsEN;
      const originalText = finalText;
      let iteration = 0;
      const totalIterations = duration / 30;

      const interval = setInterval(() => {
        element.textContent = originalText
          .split('')
          .map((char, index) => {
            if (char === ' ') return ' ';
            if (index < iteration) return originalText[index];
            return chars[Math.floor(Math.random() * chars.length)];
          })
          .join('');

        iteration += 1 / 3;

        if (iteration >= originalText.length) {
          clearInterval(interval);
          element.textContent = originalText;
        }
      }, 30);
    };

    // Glitch effect for character
    const glitchChar = (element: HTMLElement) => {
      element.classList.add('char-glitching');
      setTimeout(() => element.classList.remove('char-glitching'), 180);
    };

    // Golden pulse effect
    const goldenPulse = (element: HTMLElement) => {
      gsap.to(element, {
        textShadow: '0 0 40px rgba(201, 169, 110, 1), 0 0 80px rgba(201, 169, 110, 0.6), 0 0 120px rgba(201, 169, 110, 0.3)',
        duration: 0.3,
        yoyo: true,
        repeat: 1,
        ease: 'power2.inOut'
      });
    };

    // Mouse parallax with perspective
    let mouseX = 0;
    let mouseY = 0;
    let targetX = 0;
    let targetY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = (e.clientX / window.innerWidth - 0.5) * 30;
      mouseY = (e.clientY / window.innerHeight - 0.5) * 30;

      // Text particles respond to mouse
      textParticles.forEach((particle, i) => {
        const speed = (i + 1) * 8;
        gsap.to(particle, {
          x: mouseX * speed * 0.1,
          y: mouseY * speed * 0.1,
          duration: 0.8,
          ease: 'power2.out'
        });
      });
    });

    const updateParallax = () => {
      targetX += (mouseX - targetX) * 0.03;
      targetY += (mouseY - targetY) * 0.03;

      if (parallaxBack) {
        gsap.set(parallaxBack, {
          rotateY: targetX * 0.05,
          rotateX: -targetY * 0.05,
          x: targetX,
          y: targetY
        });
      }

      requestAnimationFrame(updateParallax);
    };

    // Wait for loading
    const waitForLoading = () => {
      return new Promise<void>((resolve) => {
        const checkLoading = () => {
          if (document.body.classList.contains('loading-complete')) {
            resolve();
          } else {
            setTimeout(checkLoading, 100);
          }
        };
        checkLoading();
      });
    };

    waitForLoading().then(() => {
      // Start animations
      if (heroContainer) {
        heroContainer.classList.add('animate');
      }

      updateParallax();

      // Initial zoom blur flash
      gsap.to(zoomBlur, {
        opacity: 0.3,
        duration: 0.15,
        yoyo: true,
        repeat: 1,
        ease: 'power2.inOut'
      });

      // Cinematic bars open
      gsap.to(cinematicBars, {
        height: '0%',
        duration: 1,
        ease: 'power3.inOut'
      });

      // Text glow background
      gsap.to(textGlowBg, {
        opacity: 1,
        scale: 1,
        duration: 2,
        delay: 0.5,
        ease: 'power2.out'
      });

      // Text particles
      gsap.to(textParticles, {
        opacity: 1,
        duration: 1,
        stagger: 0.15,
        delay: 0.8
      });

      // Main timeline
      const tl = gsap.timeline({ delay: 0.2 });

      // Corners
      tl.to(corners, {
        opacity: 1,
        duration: 0.5,
        stagger: 0.1
      })

      // Top decoration
      .to(textDecorTop, {
        opacity: 1,
        duration: 0.6,
        ease: 'power2.out'
      }, 0.3)

      .fromTo('.decor-line-left, .decor-line-right',
        { scaleX: 0 },
        { scaleX: 1, duration: 0.8, ease: 'power2.out' },
        0.4
      )

      .fromTo('.decor-diamond',
        { scale: 0, rotate: 0 },
        { scale: 1, rotate: 45, duration: 0.5, ease: 'back.out(2)' },
        0.6
      )

      // Subtitle with scramble
      .to(heroSub, {
        opacity: 1,
        duration: 0.3,
        onComplete: () => {
          if (heroSubText) {
            scrambleText(heroSubText, heroSubText.dataset.text || '', 1500);
          }
        }
      }, 0.5);

      // Character-by-character reveal for main text
      // Note: Initial opacity is handled by CSS for better LCP
      heroChars.forEach((char, i) => {
        const el = char as HTMLElement;
        const isAccent = el.classList.contains('hero-char-accent');
        const delay = 0.3 + i * 0.06;

        // Animate with GSAP enhancement (CSS already shows basic animation)
        tl.fromTo(el,
          { y: 30, rotateX: -45, scale: 0.9 },
          {
            y: 0,
            rotateX: 0,
            scale: 1,
            duration: 0.5,
            ease: 'back.out(1.5)',
            onStart: () => {
              glitchChar(el);
            },
            onComplete: () => {
              if (isAccent) {
                goldenPulse(el);
              }
            }
          }, delay);
      });

      // Bottom decoration
      tl.to(textDecorBottom, {
        opacity: 1,
        duration: 0.6,
        ease: 'power2.out'
      }, 2.0)

      // CTA
      .to(heroCta, {
        opacity: 1,
        y: 0,
        duration: 0.8,
        ease: 'power2.out'
      }, 2.2)

      // Scroll hint
      .to(scrollHint, {
        opacity: 1,
        duration: 0.5
      }, 2.4);

      // Hover effects for characters
      heroChars.forEach(char => {
        char.addEventListener('mouseenter', () => {
          const el = char as HTMLElement;
          glitchChar(el);
          gsap.to(el, {
            scale: 1.15,
            textShadow: '0 0 30px rgba(201, 169, 110, 0.8)',
            duration: 0.25,
            ease: 'power2.out'
          });
        });

        char.addEventListener('mouseleave', () => {
          gsap.to(char, {
            scale: 1,
            textShadow: '0 4px 30px rgba(0, 0, 0, 0.5)',
            duration: 0.35,
            ease: 'power2.out'
          });
        });
      });

      // Periodic subtle effects
      setInterval(() => {
        if (Math.random() > 0.6) {
          const randomChar = heroChars[Math.floor(Math.random() * heroChars.length)] as HTMLElement;
          if (randomChar) {
            glitchChar(randomChar);
          }
        }
      }, 4000);

      // Breathing glow for accent characters
      const accentChars = document.querySelectorAll('.hero-char-accent');
      accentChars.forEach(char => {
        gsap.to(char, {
          textShadow: '0 0 30px rgba(201, 169, 110, 0.6), 0 4px 30px rgba(0, 0, 0, 0.5)',
          duration: 2,
          repeat: -1,
          yoyo: true,
          ease: 'sine.inOut',
          delay: Math.random() * 2
        });
      });
    });
  };

  document.addEventListener('DOMContentLoaded', initHero);
</script>

<style>
  /* ========================================
     3D PERSPECTIVE CONTAINER
     ======================================== */
  .perspective-container {
    perspective: 1000px;
    perspective-origin: 50% 50%;
  }

  .parallax-layer {
    transform-style: preserve-3d;
    will-change: transform;
  }

  .parallax-back {
    transform: translateZ(-50px) scale(1.15);
  }

  /* ========================================
     LCP OPTIMIZATION - CSS-first visibility (no CLS)
     ======================================== */
  .hero-sub {
    opacity: 1;
  }

  .hero-char {
    opacity: 1;
  }

  /* ========================================
     PREMIUM TEXT STYLING
     ======================================== */
  .hero-main {
    font-family: var(--font-display);
    font-size: clamp(2.5rem, 8vw, 5rem);
    font-weight: 500;
    line-height: 1.3;
    letter-spacing: 0.15em;
  }

  .hero-char-wrap {
    display: inline-block;
    perspective: 800px;
    margin: 0 0.02em;
  }

  .hero-char {
    display: inline-block;
    will-change: transform, opacity, text-shadow;
    text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
    transition: text-shadow 0.3s ease;
    cursor: default;
    position: relative;
  }

  .hero-char-accent {
    color: var(--color-accent-gold);
    text-shadow: 0 0 20px rgba(201, 169, 110, 0.4), 0 4px 30px rgba(0, 0, 0, 0.5);
  }

  /* Glitch effect for characters */
  .hero-char::before,
  .hero-char::after {
    content: attr(data-char);
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    pointer-events: none;
  }

  .hero-char::before {
    color: rgba(255, 50, 50, 0.8);
    z-index: -1;
  }

  .hero-char::after {
    color: rgba(50, 255, 255, 0.8);
    z-index: -1;
  }

  .hero-char.char-glitching::before {
    opacity: 1;
    animation: charGlitchR 0.18s ease-in-out;
  }

  .hero-char.char-glitching::after {
    opacity: 1;
    animation: charGlitchC 0.18s ease-in-out;
  }

  @keyframes charGlitchR {
    0% { transform: translate(0); }
    20% { transform: translate(-3px, 2px); }
    40% { transform: translate(2px, -1px); }
    60% { transform: translate(-2px, 1px); }
    80% { transform: translate(3px, -2px); }
    100% { transform: translate(0); }
  }

  @keyframes charGlitchC {
    0% { transform: translate(0); }
    20% { transform: translate(3px, -2px); }
    40% { transform: translate(-2px, 1px); }
    60% { transform: translate(2px, -1px); }
    80% { transform: translate(-3px, 2px); }
    100% { transform: translate(0); }
  }

  /* ========================================
     TEXT DECORATIONS
     ======================================== */
  .hero-text-decor-top,
  .hero-text-decor-bottom {
    gap: 16px;
  }

  .decor-line-left,
  .decor-line-right {
    width: 60px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--color-accent-gold));
    transform-origin: right center;
  }

  .decor-line-right {
    background: linear-gradient(90deg, var(--color-accent-gold), transparent);
    transform-origin: left center;
  }

  .decor-diamond {
    width: 8px;
    height: 8px;
    border: 1px solid var(--color-accent-gold);
    transform: rotate(45deg);
  }

  /* ========================================
     TEXT GLOW BACKGROUND
     ======================================== */
  .text-glow-bg {
    background: radial-gradient(
      ellipse at center,
      rgba(201, 169, 110, 0.06) 0%,
      rgba(201, 169, 110, 0.02) 40%,
      transparent 70%
    );
    opacity: 0;
    transform: scale(0.8);
    filter: blur(40px);
  }

  /* ========================================
     TEXT PARTICLES
     ======================================== */
  .text-particle {
    position: absolute;
    width: 3px;
    height: 3px;
    background: radial-gradient(circle, rgba(201, 169, 110, 0.8) 0%, transparent 70%);
    border-radius: 50%;
    opacity: 0;
  }

  .text-particle::after {
    content: '';
    position: absolute;
    inset: -3px;
    background: inherit;
    border-radius: 50%;
    filter: blur(3px);
    opacity: 0.5;
  }

  .tp-1 { top: 10%; left: 20%; animation: tpFloat 6s ease-in-out infinite; }
  .tp-2 { top: 30%; right: 15%; animation: tpFloat 8s ease-in-out infinite; animation-delay: 1s; }
  .tp-3 { top: 60%; left: 10%; animation: tpFloat 7s ease-in-out infinite; animation-delay: 2s; }
  .tp-4 { top: 80%; right: 25%; animation: tpFloat 9s ease-in-out infinite; animation-delay: 3s; }
  .tp-5 { top: 20%; right: 30%; animation: tpFloat 5s ease-in-out infinite; animation-delay: 4s; }
  .tp-6 { top: 70%; left: 30%; animation: tpFloat 10s ease-in-out infinite; animation-delay: 5s; }

  @keyframes tpFloat {
    0%, 100% { transform: translate(0, 0); opacity: 0.3; }
    25% { transform: translate(10px, -15px); opacity: 0.8; }
    50% { transform: translate(-5px, -25px); opacity: 0.5; }
    75% { transform: translate(15px, -10px); opacity: 0.7; }
  }

  /* ========================================
     BUTTON ENHANCEMENTS
     ======================================== */
  .btn-reveal {
    overflow: hidden;
    position: relative;
  }

  .btn-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .btn-reveal:hover .btn-shine {
    left: 100%;
  }

  .btn-reveal .btn-text {
    display: inline-block;
    position: relative;
    z-index: 1;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .btn-reveal:hover .btn-text {
    animation: btnReveal 0.6s ease-out;
  }

  @keyframes btnReveal {
    0% { transform: translateY(0); }
    50% { transform: translateY(-100%); opacity: 0; }
    51% { transform: translateY(100%); }
    100% { transform: translateY(0); opacity: 1; }
  }

  /* ========================================
     KEN BURNS + 3D WARP
     ======================================== */
  .hero-bg {
    transform: scale(1.15);
    filter: saturate(1.1) contrast(1.05);
  }

  .hero-bg-container.animate .hero-bg {
    animation: kenBurns3D 35s ease-in-out infinite alternate;
  }

  @keyframes kenBurns3D {
    0% {
      transform: scale(1.15) translate3d(0%, 0%, 0) rotateY(0deg);
      filter: saturate(1.1) contrast(1.05) brightness(1);
    }
    25% {
      transform: scale(1.08) translate3d(2%, -1%, 20px) rotateY(0.5deg);
      filter: saturate(1.15) contrast(1.08) brightness(1.02);
    }
    50% {
      transform: scale(1.12) translate3d(-1.5%, 1%, -10px) rotateY(-0.3deg);
      filter: saturate(1.05) contrast(1.03) brightness(0.98);
    }
    75% {
      transform: scale(1.1) translate3d(1%, -0.5%, 15px) rotateY(0.2deg);
      filter: saturate(1.12) contrast(1.06) brightness(1.01);
    }
    100% {
      transform: scale(1.13) translate3d(-0.5%, 0.5%, 5px) rotateY(-0.1deg);
      filter: saturate(1.08) contrast(1.04) brightness(1);
    }
  }

  /* ========================================
     TILT SHIFT BLUR
     ======================================== */
  .tilt-shift-overlay {
    background: linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,0) 30%,
      rgba(0,0,0,0) 70%,
      rgba(0,0,0,0) 100%
    );
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
    mask-image: linear-gradient(
      to bottom,
      black 0%,
      transparent 15%,
      transparent 85%,
      black 100%
    );
    -webkit-mask-image: linear-gradient(
      to bottom,
      black 0%,
      transparent 15%,
      transparent 85%,
      black 100%
    );
  }

  .hero-bg-container.animate .tilt-shift-overlay {
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
  }

  /* ========================================
     ANAMORPHIC FLARES (Cinema Horizontal)
     ======================================== */
  .anamorphic-flare {
    position: absolute;
    height: 2px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(100, 180, 255, 0.1) 20%,
      rgba(100, 180, 255, 0.4) 40%,
      rgba(255, 255, 255, 0.6) 50%,
      rgba(255, 200, 100, 0.4) 60%,
      rgba(255, 150, 50, 0.1) 80%,
      transparent 100%
    );
    filter: blur(1px);
    opacity: 0;
  }

  .hero-bg-container.animate .anamorphic-flare {
    animation: anamorphicFlare 12s ease-in-out infinite;
  }

  .anamorphic-1 {
    top: 25%;
    left: -10%;
    width: 120%;
    animation-delay: 0s !important;
  }

  .anamorphic-2 {
    top: 35%;
    left: -10%;
    width: 120%;
    height: 1px;
    animation-delay: 4s !important;
  }

  .anamorphic-3 {
    top: 45%;
    left: -10%;
    width: 120%;
    height: 3px;
    animation-delay: 8s !important;
  }

  @keyframes anamorphicFlare {
    0%, 100% { opacity: 0; transform: translateX(-20%) scaleX(0.5); }
    10% { opacity: 0.8; }
    30% { opacity: 0.6; transform: translateX(10%) scaleX(1); }
    50% { opacity: 0.4; transform: translateX(30%) scaleX(1.2); }
    70% { opacity: 0.5; transform: translateX(50%) scaleX(0.8); }
    90% { opacity: 0.2; }
  }

  /* ========================================
     LIGHT LEAKS (Film Burn)
     ======================================== */
  .light-leak {
    position: absolute;
    border-radius: 50%;
    filter: blur(60px);
    mix-blend-mode: screen;
    opacity: 0;
  }

  .hero-bg-container.animate .light-leak {
    animation: lightLeak 15s ease-in-out infinite;
  }

  .leak-1 {
    top: -20%;
    right: -10%;
    width: 50%;
    height: 60%;
    background: radial-gradient(ellipse, rgba(255, 150, 50, 0.4) 0%, transparent 70%);
    animation-delay: 0s !important;
  }

  .leak-2 {
    bottom: -20%;
    left: -10%;
    width: 40%;
    height: 50%;
    background: radial-gradient(ellipse, rgba(255, 100, 50, 0.3) 0%, transparent 70%);
    animation-delay: 5s !important;
  }

  .leak-3 {
    top: 30%;
    left: -15%;
    width: 35%;
    height: 40%;
    background: radial-gradient(ellipse, rgba(255, 200, 100, 0.25) 0%, transparent 70%);
    animation-delay: 10s !important;
  }

  @keyframes lightLeak {
    0%, 100% { opacity: 0; transform: scale(0.8) rotate(0deg); }
    20% { opacity: 0.6; transform: scale(1) rotate(5deg); }
    50% { opacity: 0.4; transform: scale(1.1) rotate(-3deg); }
    80% { opacity: 0.5; transform: scale(0.95) rotate(2deg); }
  }

  /* ========================================
     WINDOW GLOW PULSE
     ======================================== */
  .window-glow {
    position: absolute;
    background: radial-gradient(ellipse, rgba(255, 220, 150, 0.6) 0%, transparent 70%);
    border-radius: 2px;
    filter: blur(3px);
    opacity: 0;
  }

  .hero-bg-container.animate .window-glow {
    animation: windowPulse 4s ease-in-out infinite;
  }

  .glow-1 { top: 30%; left: 45%; width: 8px; height: 12px; animation-delay: 0s !important; }
  .glow-2 { top: 35%; left: 47%; width: 6px; height: 10px; animation-delay: 0.5s !important; }
  .glow-3 { top: 32%; left: 50%; width: 7px; height: 11px; animation-delay: 1s !important; }
  .glow-4 { top: 38%; left: 48%; width: 5px; height: 8px; animation-delay: 1.5s !important; }
  .glow-5 { top: 28%; left: 52%; width: 8px; height: 12px; animation-delay: 2s !important; }

  @keyframes windowPulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.2); }
  }

  /* ========================================
     FIREFLIES / EMBERS
     ======================================== */
  .firefly {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, rgba(255, 200, 100, 1) 0%, rgba(255, 150, 50, 0.8) 40%, transparent 70%);
    border-radius: 50%;
    box-shadow: 0 0 10px 3px rgba(255, 180, 80, 0.5);
    opacity: 0;
  }

  .hero-bg-container.animate .firefly {
    animation: fireflyFloat 8s ease-in-out infinite;
  }

  .firefly-1 { top: 60%; left: 20%; animation-delay: 0s !important; }
  .firefly-2 { top: 70%; left: 35%; animation-delay: 1s !important; animation-duration: 10s !important; }
  .firefly-3 { top: 55%; left: 50%; animation-delay: 2s !important; animation-duration: 7s !important; }
  .firefly-4 { top: 65%; left: 65%; animation-delay: 3s !important; animation-duration: 9s !important; }
  .firefly-5 { top: 75%; left: 25%; animation-delay: 4s !important; animation-duration: 11s !important; }
  .firefly-6 { top: 50%; left: 80%; animation-delay: 5s !important; animation-duration: 8s !important; }
  .firefly-7 { top: 80%; left: 55%; animation-delay: 6s !important; animation-duration: 12s !important; }
  .firefly-8 { top: 45%; left: 15%; animation-delay: 7s !important; animation-duration: 6s !important; }

  @keyframes fireflyFloat {
    0%, 100% {
      opacity: 0;
      transform: translate(0, 0) scale(0.5);
    }
    10% { opacity: 0.8; }
    25% {
      opacity: 1;
      transform: translate(30px, -50px) scale(1);
    }
    50% {
      opacity: 0.6;
      transform: translate(-20px, -100px) scale(0.8);
    }
    75% {
      opacity: 0.9;
      transform: translate(40px, -150px) scale(1.1);
    }
    90% { opacity: 0.4; }
  }

  /* ========================================
     ZOOM BLUR (Radial)
     ======================================== */
  .zoom-blur-overlay {
    background: radial-gradient(
      circle at center,
      transparent 0%,
      transparent 30%,
      rgba(0, 0, 0, 0.1) 100%
    );
    backdrop-filter: blur(0px);
    mask-image: radial-gradient(
      circle at center,
      transparent 0%,
      transparent 50%,
      black 100%
    );
  }

  /* ========================================
     SUBTITLE
     ======================================== */
  .scramble-text {
    font-family: inherit;
    letter-spacing: inherit;
  }

  .hero-sub-text {
    text-shadow: 0 0 30px rgba(201, 169, 110, 0.5);
  }

  /* ========================================
     EXISTING EFFECTS (Optimized)
     ======================================== */
  .hero-grain {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    animation: grain 0.5s steps(1) infinite;
  }

  @keyframes grain {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(-2%, -2%); }
    50% { transform: translate(2%, 2%); }
    75% { transform: translate(-1%, 1%); }
  }

  .ray {
    position: absolute;
    background: linear-gradient(180deg, rgba(201, 169, 110, 0.12) 0%, transparent 100%);
    opacity: 0;
  }

  .hero-bg-container.animate .ray { animation: rayFade 10s ease-in-out infinite; }
  .ray-1 { top: -10%; left: 30%; width: 120px; height: 120%; transform: rotate(-10deg); }
  .ray-2 { top: -10%; right: 25%; width: 100px; height: 110%; transform: rotate(15deg); animation-delay: 5s !important; }

  @keyframes rayFade {
    0%, 100% { opacity: 0; }
    30% { opacity: 0.5; }
    70% { opacity: 0.3; }
  }

  .bokeh {
    position: absolute;
    border-radius: 50%;
    filter: blur(2px);
    opacity: 0;
  }

  .hero-bg-container.animate .bokeh { animation: bokehFloat 18s ease-in-out infinite; }
  .bokeh-1 { top: 20%; left: 15%; width: 60px; height: 60px; background: radial-gradient(circle, rgba(201, 169, 110, 0.12) 0%, transparent 70%); }
  .bokeh-2 { top: 50%; right: 20%; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255, 200, 150, 0.08) 0%, transparent 70%); animation-delay: -6s !important; }
  .bokeh-3 { bottom: 30%; left: 40%; width: 50px; height: 50px; background: radial-gradient(circle, rgba(201, 169, 110, 0.1) 0%, transparent 70%); animation-delay: -12s !important; }
  .bokeh-4 { top: 35%; right: 35%; width: 40px; height: 40px; background: radial-gradient(circle, rgba(255, 220, 180, 0.1) 0%, transparent 70%); animation-delay: -9s !important; }

  @keyframes bokehFloat {
    0%, 100% { transform: translate(0, 0); opacity: 0; }
    20% { opacity: 0.6; }
    50% { transform: translate(20px, -40px); opacity: 0.4; }
    80% { opacity: 0.5; }
  }

  .hero-mist {
    background: radial-gradient(ellipse at 30% 70%, rgba(201, 169, 110, 0.04) 0%, transparent 50%);
    opacity: 0;
  }
  .hero-bg-container.animate .hero-mist { animation: mistFlow 20s ease-in-out infinite alternate; }
  @keyframes mistFlow { 0% { opacity: 0.4; transform: translateX(-3%); } 100% { opacity: 0.6; transform: translateX(3%); } }

  .hero-light-sweep {
    background: linear-gradient(105deg, transparent 40%, rgba(255, 255, 255, 0.06) 50%, transparent 60%);
    opacity: 0;
  }
  .hero-bg-container.animate .hero-light-sweep { animation: lightSweep 12s ease-in-out infinite; animation-delay: 3s; }
  @keyframes lightSweep { 0%, 100% { transform: translateX(-150%) skewX(-15deg); opacity: 0; } 20% { opacity: 1; } 50% { transform: translateX(150%) skewX(-15deg); opacity: 0; } }

  .hero-color-grade {
    background: linear-gradient(180deg, rgba(201, 169, 110, 0.02) 0%, transparent 50%, rgba(100, 80, 60, 0.03) 100%);
    mix-blend-mode: overlay;
  }
  .hero-bg-container.animate .hero-color-grade { animation: colorGrade 10s ease-in-out infinite alternate; }
  @keyframes colorGrade { 0% { opacity: 0.4; } 100% { opacity: 0.7; } }

  .hero-vignette {
    background: radial-gradient(ellipse at center, transparent 0%, transparent 45%, rgba(10, 10, 10, 0.3) 80%, rgba(10, 10, 10, 0.55) 100%);
  }

  .hero-gradient-animated {
    background: linear-gradient(180deg, rgba(10, 10, 10, 0.1) 0%, transparent 30%, transparent 70%, rgba(10, 10, 10, 0.45) 100%);
  }

  .hero-reflection {
    background: linear-gradient(to top, rgba(201, 169, 110, 0.015) 0%, transparent 100%);
    animation: reflectionShimmer 5s ease-in-out infinite alternate;
  }
  @keyframes reflectionShimmer { 0% { opacity: 0.3; } 100% { opacity: 0.5; } }

  /* Corner Accents */
  .hero-corner { z-index: 20; }
  .hero-corner-tl::before, .hero-corner-tl::after { content: ''; position: absolute; background: rgba(201, 169, 110, 0.4); }
  .hero-corner-tl::before { top: 0; left: 0; width: 50px; height: 1px; }
  .hero-corner-tl::after { top: 0; left: 0; width: 1px; height: 50px; }
  .hero-corner-br::before, .hero-corner-br::after { content: ''; position: absolute; background: rgba(201, 169, 110, 0.4); }
  .hero-corner-br::before { bottom: 0; right: 0; width: 50px; height: 1px; }
  .hero-corner-br::after { bottom: 0; right: 0; width: 1px; height: 50px; }

  /* Scroll */
  @keyframes scroll { 0% { transform: translateY(-100%); } 100% { transform: translateY(200%); } }
  .animate-scroll { animation: scroll 1.5s ease-in-out infinite; }

  /* Performance */
  .hero-bg, .parallax-layer, .hero-grain, .hero-light-sweep, .hero-vignette, .hero-mist, .hero-color-grade,
  .bokeh, .ray, .anamorphic-flare, .light-leak, .window-glow, .firefly, .hero-char, .text-particle { will-change: transform, opacity; }

  @media (prefers-reduced-motion: reduce) {
    .hero-bg, .hero-grain, .hero-light-sweep, .hero-mist, .bokeh, .ray,
    .anamorphic-flare, .light-leak, .window-glow, .firefly, .parallax-layer,
    .text-particle, .hero-char-accent { animation: none !important; }
    .hero-char::before, .hero-char::after { display: none; }
  }
</style>
