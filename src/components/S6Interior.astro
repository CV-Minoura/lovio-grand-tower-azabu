---
// S6. Interior Component
// Premium スクロールジャック with Ken Burns, Smooth Pan, Cinematic Effects
---

<section id="interior" data-section="P1-S6" class="relative bg-background">
  <!-- Section Title -->
  <div class="section-title py-24">
    <p class="section-title-en">INTERIOR</p>
    <h2 class="section-title-jp">住空間</h2>
  </div>

  <!-- Interior Rooms -->
  <div class="interior-wrapper relative">
    <!-- Living Room -->
    <div class="interior-room h-screen sticky top-0 flex items-center overflow-hidden" data-room="living">
      <div class="absolute inset-0 overflow-hidden">
        <img
          src="/images/6-1. リビング・ダイニング.webp"
          alt="リビング・ダイニング"
          class="room-image w-full h-full object-cover"
          width="1920"
          height="1080"
          decoding="async"
          loading="lazy"
        />
        <div class="room-vignette absolute inset-0"></div>
        <div class="absolute inset-0 bg-gradient-to-r from-background/80 via-background/40 to-transparent"></div>
      </div>
      <div class="relative z-10 container-wide">
        <div class="max-w-lg room-content">
          <div class="room-number font-serif text-6xl md:text-8xl text-accent-gold/20 absolute -top-8 -left-4 select-none">01</div>
          <p class="room-label font-serif text-xs tracking-[0.3em] text-accent-gold mb-4 relative">
            <span class="room-label-line absolute -left-8 top-1/2 w-6 h-[1px] bg-accent-gold transform -translate-y-1/2"></span>
            01 / 04
          </p>
          <h3 class="room-title font-serif text-2xl md:text-4xl tracking-wider mb-2">
            <span class="room-title-char">L</span><span class="room-title-char">I</span><span class="room-title-char">V</span><span class="room-title-char">I</span><span class="room-title-char">N</span><span class="room-title-char">G</span>
            <span class="room-title-char ml-2">D</span><span class="room-title-char">I</span><span class="room-title-char">N</span><span class="room-title-char">I</span><span class="room-title-char">N</span><span class="room-title-char">G</span>
          </h3>
          <p class="room-name text-display text-lg text-text-secondary mb-6">リビング・ダイニング</p>
          <div class="room-desc-wrap overflow-hidden">
            <p class="room-desc text-text-secondary leading-loose">
              天井高約2.7mの開放感。フルハイトサッシュから
              差し込む光と東京の眺望が、上質な日常を演出します。
            </p>
          </div>
          <div class="room-line w-0 h-[1px] bg-accent-gold/30 mt-8"></div>
        </div>
      </div>
    </div>

    <!-- Kitchen -->
    <div class="interior-room h-screen sticky top-0 flex items-center overflow-hidden" data-room="kitchen">
      <div class="absolute inset-0 overflow-hidden">
        <img
          src="/images/6-2. キッチン.webp"
          alt="キッチン"
          class="room-image w-full h-full object-cover"
          width="1920"
          height="1080"
          decoding="async"
          loading="lazy"
        />
        <div class="room-vignette absolute inset-0"></div>
        <div class="absolute inset-0 bg-gradient-to-l from-background/80 via-background/40 to-transparent"></div>
      </div>
      <div class="relative z-10 container-wide flex justify-end">
        <div class="max-w-lg text-right room-content">
          <div class="room-number font-serif text-6xl md:text-8xl text-accent-gold/20 absolute -top-8 -right-4 select-none">02</div>
          <p class="room-label font-serif text-xs tracking-[0.3em] text-accent-gold mb-4 relative">
            02 / 04
            <span class="room-label-line absolute -right-8 top-1/2 w-6 h-[1px] bg-accent-gold transform -translate-y-1/2"></span>
          </p>
          <h3 class="room-title font-serif text-2xl md:text-4xl tracking-wider mb-2">
            <span class="room-title-char">K</span><span class="room-title-char">I</span><span class="room-title-char">T</span><span class="room-title-char">C</span><span class="room-title-char">H</span><span class="room-title-char">E</span><span class="room-title-char">N</span>
          </h3>
          <p class="room-name text-display text-lg text-text-secondary mb-6">キッチン</p>
          <div class="room-desc-wrap overflow-hidden">
            <p class="room-desc text-text-secondary leading-loose">
              ドイツ製ビルトイン機器を標準装備。
              機能美を追求したオープンキッチンで、
              料理をより豊かな時間に。
            </p>
          </div>
          <div class="room-line w-0 h-[1px] bg-accent-gold/30 mt-8 ml-auto"></div>
        </div>
      </div>
    </div>

    <!-- Bedroom -->
    <div class="interior-room h-screen sticky top-0 flex items-center overflow-hidden" data-room="bedroom">
      <div class="absolute inset-0 overflow-hidden">
        <img
          src="/images/6-3. マスターベッドルーム.webp"
          alt="マスターベッドルーム"
          class="room-image w-full h-full object-cover"
          width="1920"
          height="1080"
          decoding="async"
          loading="lazy"
        />
        <div class="room-vignette absolute inset-0"></div>
        <div class="absolute inset-0 bg-gradient-to-r from-background/80 via-background/40 to-transparent"></div>
      </div>
      <div class="relative z-10 container-wide">
        <div class="max-w-lg room-content">
          <div class="room-number font-serif text-6xl md:text-8xl text-accent-gold/20 absolute -top-8 -left-4 select-none">03</div>
          <p class="room-label font-serif text-xs tracking-[0.3em] text-accent-gold mb-4 relative">
            <span class="room-label-line absolute -left-8 top-1/2 w-6 h-[1px] bg-accent-gold transform -translate-y-1/2"></span>
            03 / 04
          </p>
          <h3 class="room-title font-serif text-2xl md:text-4xl tracking-wider mb-2">
            <span class="room-title-char">M</span><span class="room-title-char">A</span><span class="room-title-char">S</span><span class="room-title-char">T</span><span class="room-title-char">E</span><span class="room-title-char">R</span>
            <span class="room-title-char ml-2">B</span><span class="room-title-char">E</span><span class="room-title-char">D</span><span class="room-title-char">R</span><span class="room-title-char">O</span><span class="room-title-char">O</span><span class="room-title-char">M</span>
          </h3>
          <p class="room-name text-display text-lg text-text-secondary mb-6">マスターベッドルーム</p>
          <div class="room-desc-wrap overflow-hidden">
            <p class="room-desc text-text-secondary leading-loose">
              都心の喧騒を忘れる静寂の空間。
              大きな窓からの夜景が、
              眠りにつく前の贅沢なひとときを約束します。
            </p>
          </div>
          <div class="room-line w-0 h-[1px] bg-accent-gold/30 mt-8"></div>
        </div>
      </div>
    </div>

    <!-- Bathroom -->
    <div class="interior-room h-screen sticky top-0 flex items-center overflow-hidden" data-room="bathroom">
      <div class="absolute inset-0 overflow-hidden">
        <img
          src="/images/6-4. バスルーム.webp"
          alt="バスルーム"
          class="room-image w-full h-full object-cover"
          width="1920"
          height="1080"
          decoding="async"
          loading="lazy"
        />
        <div class="room-vignette absolute inset-0"></div>
        <div class="absolute inset-0 bg-gradient-to-l from-background/80 via-background/40 to-transparent"></div>
      </div>
      <div class="relative z-10 container-wide flex justify-end">
        <div class="max-w-lg text-right room-content">
          <div class="room-number font-serif text-6xl md:text-8xl text-accent-gold/20 absolute -top-8 -right-4 select-none">04</div>
          <p class="room-label font-serif text-xs tracking-[0.3em] text-accent-gold mb-4 relative">
            04 / 04
            <span class="room-label-line absolute -right-8 top-1/2 w-6 h-[1px] bg-accent-gold transform -translate-y-1/2"></span>
          </p>
          <h3 class="room-title font-serif text-2xl md:text-4xl tracking-wider mb-2">
            <span class="room-title-char">B</span><span class="room-title-char">A</span><span class="room-title-char">T</span><span class="room-title-char">H</span><span class="room-title-char">R</span><span class="room-title-char">O</span><span class="room-title-char">O</span><span class="room-title-char">M</span>
          </h3>
          <p class="room-name text-display text-lg text-text-secondary mb-6">バスルーム</p>
          <div class="room-desc-wrap overflow-hidden">
            <p class="room-desc text-text-secondary leading-loose">
              1620サイズのゆとりある浴室。
              ジェットバス・ミストサウナを標準装備し、
              自宅でスパのようなくつろぎを。
            </p>
          </div>
          <div class="room-line w-0 h-[1px] bg-accent-gold/30 mt-8 ml-auto"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Room Navigation -->
  <div class="fixed right-8 top-1/2 -translate-y-1/2 z-20 hidden lg:flex flex-col gap-4 interior-nav opacity-0">
    <button class="room-nav-item active group" data-target="living">
      <span class="room-nav-dot w-2 h-2 rounded-full bg-accent-gold transition-all relative">
        <span class="absolute inset-0 rounded-full bg-accent-gold animate-ping opacity-50"></span>
      </span>
      <span class="room-nav-label absolute right-full mr-4 text-xs tracking-wider text-accent-gold opacity-0 whitespace-nowrap transition-opacity">LIVING</span>
    </button>
    <button class="room-nav-item group" data-target="kitchen">
      <span class="room-nav-dot w-2 h-2 rounded-full bg-border transition-all relative"></span>
      <span class="room-nav-label absolute right-full mr-4 text-xs tracking-wider text-text-secondary opacity-0 whitespace-nowrap transition-opacity">KITCHEN</span>
    </button>
    <button class="room-nav-item group" data-target="bedroom">
      <span class="room-nav-dot w-2 h-2 rounded-full bg-border transition-all relative"></span>
      <span class="room-nav-label absolute right-full mr-4 text-xs tracking-wider text-text-secondary opacity-0 whitespace-nowrap transition-opacity">BEDROOM</span>
    </button>
    <button class="room-nav-item group" data-target="bathroom">
      <span class="room-nav-dot w-2 h-2 rounded-full bg-border transition-all relative"></span>
      <span class="room-nav-label absolute right-full mr-4 text-xs tracking-wider text-text-secondary opacity-0 whitespace-nowrap transition-opacity">BATHROOM</span>
    </button>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const initInterior = () => {
    const rooms = document.querySelectorAll('.interior-room');
    const navItems = document.querySelectorAll('.room-nav-item');
    const nav = document.querySelector('.interior-nav');

    // Show nav when interior section is in view
    ScrollTrigger.create({
      trigger: '#interior',
      start: 'top 80%',
      end: 'bottom 20%',
      onEnter: () => gsap.to(nav, { opacity: 1, duration: 0.3 }),
      onLeave: () => gsap.to(nav, { opacity: 0, duration: 0.3 }),
      onEnterBack: () => gsap.to(nav, { opacity: 1, duration: 0.3 }),
      onLeaveBack: () => gsap.to(nav, { opacity: 0, duration: 0.3 })
    });

    // Room scroll triggers
    rooms.forEach((room, index) => {
      const image = room.querySelector('.room-image');
      const content = room.querySelector('.room-content');
      const titleChars = room.querySelectorAll('.room-title-char');
      const label = room.querySelector('.room-label');
      const labelLine = room.querySelector('.room-label-line');
      const name = room.querySelector('.room-name');
      const desc = room.querySelector('.room-desc');
      const line = room.querySelector('.room-line');
      const number = room.querySelector('.room-number');

      // Initial states
      gsap.set(titleChars, { opacity: 0, y: 20, rotateX: -90 });
      gsap.set([label, name], { opacity: 0, y: 20 });
      gsap.set(desc, { opacity: 0, y: 30 });
      gsap.set(line, { width: 0 });
      gsap.set(labelLine, { scaleX: 0, transformOrigin: 'left center' });
      gsap.set(number, { opacity: 0, scale: 0.8 });

      ScrollTrigger.create({
        trigger: room,
        start: 'top center',
        end: 'bottom center',
        onEnter: () => {

          // Number fade in
          gsap.to(number, {
            opacity: 1,
            scale: 1,
            duration: 0.8,
            ease: 'power2.out'
          });

          // Label animation
          gsap.to(label, {
            opacity: 1,
            y: 0,
            duration: 0.6,
            ease: 'power2.out'
          });
          gsap.to(labelLine, {
            scaleX: 1,
            duration: 0.6,
            delay: 0.2,
            ease: 'power2.out'
          });

          // Title characters reveal with 3D rotation
          gsap.to(titleChars, {
            opacity: 1,
            y: 0,
            rotateX: 0,
            duration: 0.5,
            stagger: 0.03,
            delay: 0.2,
            ease: 'power2.out'
          });

          // Name
          gsap.to(name, {
            opacity: 1,
            y: 0,
            duration: 0.6,
            delay: 0.4,
            ease: 'power2.out'
          });

          // Description
          gsap.to(desc, {
            opacity: 1,
            y: 0,
            duration: 0.8,
            delay: 0.5,
            ease: 'power2.out'
          });

          // Accent line
          gsap.to(line, {
            width: '100px',
            duration: 0.8,
            delay: 0.6,
            ease: 'power2.out'
          });

          // Update nav
          navItems.forEach((item, i) => {
            const dot = item.querySelector('.room-nav-dot');
            const ping = dot?.querySelector('.animate-ping');
            const label = item.querySelector('.room-nav-label');

            if (i === index) {
              item.classList.add('active');
              gsap.to(dot, { backgroundColor: '#C9A96E', scale: 1.5, duration: 0.3 });
              if (ping) {
                (ping as HTMLElement).style.display = 'block';
              }
              gsap.to(label, { opacity: 1, duration: 0.3 });
            } else {
              item.classList.remove('active');
              gsap.to(dot, { backgroundColor: '#27272A', scale: 1, duration: 0.3 });
              if (ping) {
                (ping as HTMLElement).style.display = 'none';
              }
              gsap.to(label, { opacity: 0, duration: 0.3 });
            }
          });
        },
        onEnterBack: () => {
          navItems.forEach((item, i) => {
            const dot = item.querySelector('.room-nav-dot');
            const ping = dot?.querySelector('.animate-ping');
            const label = item.querySelector('.room-nav-label');

            if (i === index) {
              item.classList.add('active');
              gsap.to(dot, { backgroundColor: '#C9A96E', scale: 1.5, duration: 0.3 });
              if (ping) {
                (ping as HTMLElement).style.display = 'block';
              }
              gsap.to(label, { opacity: 1, duration: 0.3 });
            } else {
              item.classList.remove('active');
              gsap.to(dot, { backgroundColor: '#27272A', scale: 1, duration: 0.3 });
              if (ping) {
                (ping as HTMLElement).style.display = 'none';
              }
              gsap.to(label, { opacity: 0, duration: 0.3 });
            }
          });
        }
      });
    });

    // Nav click to scroll
    navItems.forEach(item => {
      item.addEventListener('click', () => {
        const target = item.getAttribute('data-target');
        const targetRoom = document.querySelector(`[data-room="${target}"]`);
        if (targetRoom) {
          targetRoom.scrollIntoView({ behavior: 'smooth' });
        }
      });

      // Hover effect for nav labels
      item.addEventListener('mouseenter', () => {
        const label = item.querySelector('.room-nav-label');
        gsap.to(label, { opacity: 1, duration: 0.2 });
      });

      item.addEventListener('mouseleave', () => {
        if (!item.classList.contains('active')) {
          const label = item.querySelector('.room-nav-label');
          gsap.to(label, { opacity: 0, duration: 0.2 });
        }
      });
    });

    // Subtle mouse parallax on room images (very light effect to preserve quality)
    rooms.forEach(room => {
      const image = room.querySelector('.room-image');

      room.addEventListener('mousemove', (e) => {
        const rect = (room as HTMLElement).getBoundingClientRect();
        const x = ((e as MouseEvent).clientX - rect.left) / rect.width - 0.5;
        const y = ((e as MouseEvent).clientY - rect.top) / rect.height - 0.5;

        // Very subtle movement only
        gsap.to(image, {
          x: x * 10,
          y: y * 8,
          duration: 0.8,
          ease: 'power2.out'
        });
      });

      room.addEventListener('mouseleave', () => {
        gsap.to(image, {
          x: 0,
          y: 0,
          duration: 0.8,
          ease: 'power2.out'
        });
      });
    });
  };

  document.addEventListener('DOMContentLoaded', initInterior);
</script>

<style>
  .interior-room {
    will-change: transform;
  }

  .room-image {
    will-change: transform;
    transition: transform 0.3s ease-out;
  }

  .room-vignette {
    background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.25) 100%);
    pointer-events: none;
  }

  .room-title-char {
    display: inline-block;
    will-change: transform, opacity;
    transform-style: preserve-3d;
  }

  .room-content {
    position: relative;
  }

  .room-nav-item {
    padding: 8px;
    cursor: pointer;
    position: relative;
  }

  .room-nav-dot {
    will-change: transform, background-color;
  }

  .room-nav-item:hover .room-nav-dot {
    transform: scale(1.3);
  }

  .room-nav-label {
    transition: opacity 0.2s ease;
  }

  .room-line {
    will-change: width;
  }

  @media (prefers-reduced-motion: reduce) {
    .room-image,
    .room-title-char,
    .room-nav-dot {
      transition: none !important;
    }

    .animate-ping {
      animation: none !important;
    }
  }
</style>
