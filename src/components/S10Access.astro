---
---

<section id="access" data-section="P1-S10" class="section-padding bg-background relative overflow-hidden">
  <!-- Station Background Image -->
  <div class="absolute right-0 top-0 w-1/2 h-full opacity-20 hidden lg:block">
    <img
      src="/images/10-1. 麻布十番駅.webp"
      alt=""
      class="w-full h-full object-cover"
      width="960"
      height="1080"
      decoding="async"
      loading="lazy"
    />
    <div class="absolute inset-0 bg-gradient-to-r from-background via-background/80 to-transparent"></div>
  </div>

  <div class="container-wide relative z-10">
    <!-- Section Title -->
    <div class="section-title">
      <p class="section-title-en">ACCESS</p>
      <h2 class="section-title-jp">アクセス</h2>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
      <!-- Nearest Stations -->
      <div class="access-stations">
        <h3 class="font-serif text-lg tracking-wider mb-8 text-accent-gold flex items-center gap-3">
          <span class="station-icon w-8 h-8 rounded-full border border-accent-gold flex items-center justify-center">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </span>
          NEAREST STATION
        </h3>

        <div class="space-y-8">
          <!-- Main Station -->
          <div class="station-card p-6 border border-accent-gold bg-surface relative overflow-hidden group">
            <div class="station-shine absolute inset-0 pointer-events-none"></div>
            <div class="flex items-center gap-4 mb-4">
              <div class="line-indicator w-3 h-3 rounded-full relative" style="background: #00A2E8;">
                <div class="absolute inset-0 rounded-full animate-ping opacity-50" style="background: #00A2E8;"></div>
              </div>
              <span class="text-sm text-text-secondary">東京メトロ南北線</span>
            </div>
            <h4 class="font-display text-xl mb-2">麻布十番駅</h4>
            <div class="flex items-baseline gap-2">
              <span class="text-xs text-text-secondary">徒歩</span>
              <span class="access-time font-serif text-4xl text-accent-gold" data-time="4">0</span>
              <span class="text-lg">分</span>
            </div>
            <div class="station-progress absolute bottom-0 left-0 h-1 bg-accent-gold/30 w-0"></div>
          </div>

          <!-- Sub Station -->
          <div class="station-card p-6 border border-border hover:border-accent-gold transition-colors relative overflow-hidden group">
            <div class="station-shine absolute inset-0 pointer-events-none"></div>
            <div class="flex items-center gap-4 mb-4">
              <div class="line-indicator w-3 h-3 rounded-full" style="background: #E60012;"></div>
              <span class="text-sm text-text-secondary">都営大江戸線</span>
            </div>
            <h4 class="font-display text-xl mb-2">麻布十番駅</h4>
            <div class="flex items-baseline gap-2">
              <span class="text-xs text-text-secondary">徒歩</span>
              <span class="access-time font-serif text-4xl text-accent-gold" data-time="5">0</span>
              <span class="text-lg">分</span>
            </div>
            <div class="station-progress absolute bottom-0 left-0 h-1 bg-accent-gold/30 w-0"></div>
          </div>

          <div class="station-card p-6 border border-border hover:border-accent-gold transition-colors relative overflow-hidden group">
            <div class="station-shine absolute inset-0 pointer-events-none"></div>
            <div class="flex items-center gap-4 mb-4">
              <div class="line-indicator w-3 h-3 rounded-full" style="background: #9C5E31;"></div>
              <span class="text-sm text-text-secondary">東京メトロ日比谷線</span>
            </div>
            <h4 class="font-display text-xl mb-2">六本木駅</h4>
            <div class="flex items-baseline gap-2">
              <span class="text-xs text-text-secondary">徒歩</span>
              <span class="access-time font-serif text-4xl text-accent-gold" data-time="10">0</span>
              <span class="text-lg">分</span>
            </div>
            <div class="station-progress absolute bottom-0 left-0 h-1 bg-accent-gold/30 w-0"></div>
          </div>
        </div>
      </div>

      <!-- Transit Times -->
      <div class="access-transit">
        <h3 class="font-serif text-lg tracking-wider mb-8 text-accent-gold flex items-center gap-3">
          <span class="transit-icon w-8 h-8 rounded-full border border-accent-gold flex items-center justify-center">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </span>
          TRANSIT TIME
        </h3>

        <div class="route-diagram relative">
          <!-- Route Line with flowing light effect -->
          <div class="route-line-wrapper absolute left-4 top-0 bottom-0 w-[2px] overflow-hidden">
            <div class="route-line-bg absolute inset-0 bg-border"></div>
            <div class="route-line-fill absolute top-0 left-0 w-full h-0 bg-gradient-to-b from-accent-gold via-accent-gold to-accent-gold/50"></div>
            <div class="route-line-glow absolute top-0 left-0 w-full h-8 bg-gradient-to-b from-accent-gold via-white to-transparent opacity-0"></div>
          </div>

          <!-- Destinations -->
          <div class="space-y-6">
            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 rounded-full bg-accent-gold">
                <div class="absolute inset-0 rounded-full bg-accent-gold animate-ping opacity-30"></div>
              </div>
              <div class="flex-1">
                <h4 class="font-display text-lg">六本木</h4>
                <p class="text-xs text-text-secondary mt-1">Roppongi</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="3">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>

            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 bg-border rounded-full transition-colors duration-300"></div>
              <div class="flex-1">
                <h4 class="font-display text-lg">渋谷</h4>
                <p class="text-xs text-text-secondary mt-1">Shibuya</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="8">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>

            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 bg-border rounded-full transition-colors duration-300"></div>
              <div class="flex-1">
                <h4 class="font-display text-lg">新宿</h4>
                <p class="text-xs text-text-secondary mt-1">Shinjuku</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="15">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>

            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 bg-border rounded-full transition-colors duration-300"></div>
              <div class="flex-1">
                <h4 class="font-display text-lg">東京</h4>
                <p class="text-xs text-text-secondary mt-1">Tokyo</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="18">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>

            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 bg-border rounded-full transition-colors duration-300"></div>
              <div class="flex-1">
                <h4 class="font-display text-lg">品川</h4>
                <p class="text-xs text-text-secondary mt-1">Shinagawa</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="12">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>

            <div class="route-item flex items-center gap-6 pl-10 relative opacity-0">
              <div class="route-dot absolute left-3 w-3 h-3 bg-border rounded-full transition-colors duration-300"></div>
              <div class="flex-1">
                <h4 class="font-display text-lg">羽田空港</h4>
                <p class="text-xs text-text-secondary mt-1">Haneda Airport</p>
              </div>
              <div class="flex items-baseline gap-1">
                <span class="transit-time font-serif text-3xl text-accent-gold" data-time="25">0</span>
                <span class="text-sm">分</span>
              </div>
            </div>
          </div>
        </div>

        <p class="mt-8 text-xs text-text-secondary flex items-start gap-2">
          <span class="text-accent-gold">※</span>
          所要時間は日中平常時のもので、時間帯により異なります。乗り換え・待ち時間は含みません。
        </p>
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const initAccess = () => {
    const accessTimes = document.querySelectorAll('.access-time');
    const transitTimes = document.querySelectorAll('.transit-time');
    const routeItems = document.querySelectorAll('.route-item');
    const routeDots = document.querySelectorAll('.route-dot');
    const stationCards = document.querySelectorAll('.station-card');
    const routeLineFill = document.querySelector('.route-line-fill');
    const routeLineGlow = document.querySelector('.route-line-glow');

    // Enhanced count up animation with easing
    const countUp = (element: Element, targetTime: number, delay: number = 0) => {
      const obj = { value: 0 };
      gsap.to(obj, {
        value: targetTime,
        duration: 1.5,
        delay: delay,
        ease: 'power2.out',
        onUpdate: () => {
          element.textContent = Math.round(obj.value).toString();
        }
      });
    };

    // Access times animation with card effects
    ScrollTrigger.create({
      trigger: '.access-stations',
      start: 'top 70%',
      onEnter: () => {
        stationCards.forEach((card, index) => {
          const timeEl = card.querySelector('.access-time');
          const progress = card.querySelector('.station-progress');
          const time = parseInt(timeEl?.getAttribute('data-time') || '0');

          // Card slide in
          gsap.fromTo(card,
            { opacity: 0, x: -30 },
            {
              opacity: 1,
              x: 0,
              duration: 0.6,
              delay: index * 0.15,
              ease: 'power2.out'
            }
          );

          // Count up
          if (timeEl) {
            countUp(timeEl, time, index * 0.15 + 0.3);
          }

          // Progress bar
          if (progress) {
            gsap.to(progress, {
              width: `${(time / 15) * 100}%`,
              duration: 1,
              delay: index * 0.15 + 0.5,
              ease: 'power2.out'
            });
          }
        });
      }
    });

    // Transit times animation with flowing light
    ScrollTrigger.create({
      trigger: '.access-transit',
      start: 'top 70%',
      onEnter: () => {
        // Route line fill animation
        gsap.to(routeLineFill, {
          height: '100%',
          duration: 2,
          ease: 'power2.out'
        });

        // Flowing glow effect
        gsap.to(routeLineGlow, {
          opacity: 0.8,
          duration: 0.3,
          onComplete: () => {
            gsap.to(routeLineGlow, {
              top: '100%',
              duration: 2,
              ease: 'power2.out',
              onComplete: () => {
                gsap.to(routeLineGlow, { opacity: 0, duration: 0.3 });
              }
            });
          }
        });

        // Route items stagger
        routeItems.forEach((item, index) => {
          const timeEl = item.querySelector('.transit-time');
          const dot = item.querySelector('.route-dot');
          const time = parseInt(timeEl?.getAttribute('data-time') || '0');

          // Item fade in
          gsap.to(item, {
            opacity: 1,
            x: 0,
            duration: 0.5,
            delay: index * 0.12,
            ease: 'power2.out'
          });

          // Dot color change
          gsap.to(dot, {
            backgroundColor: '#C9A96E',
            duration: 0.3,
            delay: index * 0.12 + 0.2
          });

          // Count up
          if (timeEl) {
            countUp(timeEl, time, index * 0.12 + 0.3);
          }
        });
      }
    });

    // Station card hover effects
    stationCards.forEach(card => {
      const shine = card.querySelector('.station-shine');

      card.addEventListener('mousemove', (e) => {
        const rect = (card as HTMLElement).getBoundingClientRect();
        const x = ((e as MouseEvent).clientX - rect.left) / rect.width * 100;
        const y = ((e as MouseEvent).clientY - rect.top) / rect.height * 100;

        gsap.set(shine, {
          background: `radial-gradient(circle at ${x}% ${y}%, rgba(201,169,110,0.15) 0%, transparent 50%)`
        });
      });

      card.addEventListener('mouseenter', () => {
        gsap.to(card, {
          x: 8,
          duration: 0.3,
          ease: 'power2.out'
        });
      });

      card.addEventListener('mouseleave', () => {
        gsap.to(card, {
          x: 0,
          duration: 0.3,
          ease: 'power2.out'
        });
        gsap.set(shine, { background: 'none' });
      });
    });

    // Route item hover effects
    routeItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        gsap.to(item, {
          x: 8,
          duration: 0.3,
          ease: 'power2.out'
        });

        const dot = item.querySelector('.route-dot');
        gsap.to(dot, {
          scale: 1.5,
          duration: 0.3
        });
      });

      item.addEventListener('mouseleave', () => {
        gsap.to(item, {
          x: 0,
          duration: 0.3,
          ease: 'power2.out'
        });

        const dot = item.querySelector('.route-dot');
        gsap.to(dot, {
          scale: 1,
          duration: 0.3
        });
      });
    });
  };

  document.addEventListener('DOMContentLoaded', initAccess);
</script>

<style>
  .station-card {
    transition: all 0.3s ease;
    will-change: transform;
  }

  .station-shine {
    will-change: background;
  }

  .route-item {
    transition: all 0.3s ease;
    will-change: transform, opacity;
  }

  .route-dot {
    will-change: transform, background-color;
  }

  .route-line-fill {
    will-change: height;
  }

  .route-line-glow {
    will-change: top, opacity;
    filter: blur(4px);
  }

  .station-progress {
    will-change: width;
  }

  .line-indicator {
    will-change: transform;
  }

  @media (prefers-reduced-motion: reduce) {
    .station-card,
    .route-item,
    .route-dot,
    .route-line-fill,
    .route-line-glow {
      transition: none !important;
    }

    .animate-ping {
      animation: none !important;
    }
  }
</style>
